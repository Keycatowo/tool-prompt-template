<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt æ¨¡æ¿å¡«å…¥å·¥å…·</title>
    <link rel="icon" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23667eea'%3e%3cpath d='M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z'/%3e%3c/svg%3e" type="image/svg+xml">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23667eea'%3e%3cpath d='M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z'/%3e%3c/svg%3e">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EP1WXB46KZ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-EP1WXB46KZ');
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 2rem;
            font-weight: 600;
        }

        .template-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .template-title {
            color: #2d3748;
            font-size: 1.2rem;
            font-weight: 500;
            margin: 0;
        }

        .header-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .btn-reset-header {
            background: linear-gradient(45deg, #4299e1, #3182ce);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-reset-header:hover {
            background: linear-gradient(45deg, #3182ce, #2c5282);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(66, 153, 225, 0.4);
        }

        .edit-template-btn {
            background: linear-gradient(45deg, #ed8936, #dd6b20);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .edit-template-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(237, 137, 54, 0.4);
        }

        .template-display {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            min-height: 100px;
            font-size: 18px;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .placeholder {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            cursor: pointer;
            display: inline-block;
            margin: 0 3px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
        }

        .placeholder:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(102, 126, 234, 0.4);
        }

        .filled {
            background: linear-gradient(45deg, #48bb78, #38a169);
            animation: fillAnimation 0.3s ease;
        }

        @keyframes fillAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .section {
            margin-bottom: 25px;
        }

        .section h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 500;
        }

        .format-note {
            background: #fff7ed;
            border: 1px solid #fed7aa;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #9a3412;
        }

        .format-tabs {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .tab-buttons {
            display: flex;
            background: #f8fafc;
            padding: 6px;
            gap: 4px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: transparent;
            color: #64748b;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            text-align: center;
        }

        .tab-btn:hover {
            background: #e2e8f0;
            color: #334155;
        }

        .tab-btn.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
            font-weight: 600;
        }

        .tab-content {
            padding: 25px;
            min-height: 100px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        .format-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }

        .format-btn {
            background: white;
            border: 2px solid #e2e8f0;
            color: #4a5568;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .format-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }

        .format-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
            color: #667eea;
        }

        .format-btn:hover::before {
            left: 100%;
        }

        .format-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }

        .format-btn.active:hover {
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
            transform: translateY(-2px);
            color: white;
        }

        @media (max-width: 768px) {
            .tab-buttons {
                flex-wrap: wrap;
                gap: 6px;
            }
            
            .tab-btn {
                font-size: 12px;
                padding: 10px 12px;
            }
            
            .format-buttons {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 10px;
            }
            
            .format-btn {
                padding: 10px 16px;
                font-size: 13px;
            }
            
            .action-buttons {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            
            .chatgpt-button-group {
                grid-column: 1 / -1;
                order: -1;
            }

            .btn-model-selector {
                position: relative;
                width: 100%;
                height: auto;
                border-radius: 8px;
                margin-top: 5px;
            }

            .chatgpt-button-group .btn-chatgpt {
                border-radius: 8px;
                margin-right: 0;
            }
        }

        .added-format {
            background: #e6fffa;
            border: 1px solid #81e6d9;
            border-radius: 6px;
            padding: 8px 12px;
            margin: 8px 0;
            font-size: 14px;
            color: #234e52;
            position: relative;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .remove-format {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-format:hover {
            background: #e53e3e;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-action {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
        }

        .btn-chatgpt {
            background: linear-gradient(45deg, #10a37f, #0d8b6b);
            color: white;
        }

        .btn-chatgpt:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 163, 127, 0.4);
        }

        .chatgpt-button-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            position: relative;
        }

        .chatgpt-button-group .btn-chatgpt {
            border-radius: 8px 0 0 8px;
            margin-right: 0;
        }

        .btn-model-selector {
            background: linear-gradient(45deg, #0d8b6b, #0a7557);
            color: white;
            border: none;
            padding: 8px 10px;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            font-size: 12px;
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-model-selector:hover {
            background: linear-gradient(45deg, #0a7557, #086145);
        }

        .model-selector-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            display: none;
            min-width: 120px;
        }

        .model-selector-dropdown.show {
            display: block;
        }

        .model-option {
            padding: 8px 12px;
            cursor: pointer;
            font-size: 14px;
            border-bottom: 1px solid #eee;
        }

        .model-option:last-child {
            border-bottom: none;
        }

        .model-option:hover {
            background: #f5f5f5;
        }

        .model-option.selected {
            background: #10a37f;
            color: white;
        }

        .selected-model-display {
            font-size: 12px;
            color: #666;
            text-align: center;
            margin-top: 2px;
        }

        .btn-copy {
            background: linear-gradient(45deg, #48bb78, #38a169);
            color: white;
        }

        .btn-copy:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
        }

        .btn-reset {
            background: linear-gradient(45deg, #ed8936, #dd6b20);
            color: white;
        }

        .btn-reset:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(237, 137, 54, 0.4);
        }

        .btn-clear {
            background: linear-gradient(45deg, #f56565, #e53e3e);
            color: white;
        }

        .btn-clear:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(245, 101, 101, 0.4);
        }

        /* Modal æ¨£å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: modalAppear 0.3s ease;
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal h3 {
            margin-top: 0;
            color: #2d3748;
            font-size: 1.3rem;
        }

        .modal input, .modal textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            margin: 15px 0;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }

        .modal textarea {
            min-height: 120px;
            max-height: none;
            resize: vertical;
            overflow-y: hidden;
        }

        .modal input:focus, .modal textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #48bb78;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            font-weight: 500;
            max-width: 300px;
            word-wrap: break-word;
        }

        .notification.show {
            transform: translateX(0);
        }

        .example {
            background: #f0f4f8;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .example h4 {
            margin: 0 0 10px 0;
            color: #2d3748;
        }

        .example code {
            background: #e2e8f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .url-share-section {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .url-share-section h4 {
            margin: 0 0 8px 0;
            color: #0c4a6e;
            font-size: 1rem;
        }

        .btn-share {
            background: linear-gradient(45deg, #0ea5e9, #0284c7);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-share:hover {
            background: linear-gradient(45deg, #0284c7, #0369a1);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4);
        }

        .empty-template {
            text-align: center;
            color: #a0aec0;
            font-style: italic;
            padding: 40px;
        }

        .example-selector {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .example-selector h4 {
            margin: 0 0 10px 0;
            color: #0c4a6e;
            font-size: 1rem;
        }

        .example-selector select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e7ff;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .example-selector select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .example-selector select:hover {
            border-color: #c7d2fe;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ Prompt æ¨¡æ¿å¡«å…¥å·¥å…·</h1>
        
        <div class="template-header">
            <h2 class="template-title">ğŸ“‹ é»æ“Šä¸‹æ–¹æ¨™ç±¤é€²è¡Œå¡«å…¥</h2>
            <div class="header-buttons">
                <button class="btn-reset-header" onclick="resetTemplate()">ğŸ”„ é‡ç½®å¡«å…¥</button>
                <button class="edit-template-btn" onclick="openTemplateEditor()">âœï¸ ç·¨è¼¯æ¨¡æ¿</button>
            </div>
        </div>

        <div class="template-display" id="templateDisplay">
            <div class="empty-template">
                è«‹é»æ“Šã€Œç·¨è¼¯æ¨¡æ¿ã€é–‹å§‹è¨­å®šä½ çš„ prompt æ¨¡æ¿...
            </div>
        </div>

        <div class="section">
            <h2>ğŸ¨ å¿«é€Ÿæ·»åŠ æ ¼å¼è¦æ±‚</h2>
            
            <div class="format-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('output')">ğŸ“Š è¼¸å‡ºæ ¼å¼</button>
                    <button class="tab-btn" onclick="switchTab('length')">ğŸ“ é•·åº¦æ§åˆ¶</button>
                    <button class="tab-btn" onclick="switchTab('structure')">ğŸ—ï¸ çµæ§‹è¦æ±‚</button>
                    <button class="tab-btn" onclick="switchTab('style')">ğŸ¯ èªè¨€é¢¨æ ¼</button>
                    <button class="tab-btn" onclick="switchTab('special')">ğŸ“‹ ç‰¹æ®Šè¦æ±‚</button>
                </div>
                
                <div class="tab-content">
                    <div class="tab-panel active" id="tab-output">
                        <div class="format-buttons">
                            <button class="format-btn" onclick="addFormat('è«‹å°‡çµæœä»¥è¡¨æ ¼å½¢å¼è¼¸å‡ºã€‚')">è¡¨æ ¼æ ¼å¼</button>
                            <button class="format-btn" onclick="addFormat('è«‹å°‡çµæœä»¥æ¢åˆ—å¼å‘ˆç¾ã€‚')">æ¢åˆ—æ¸…å–®</button>
                            <button class="format-btn" onclick="addFormat('è«‹å°‡çµæœä»¥ JSON æ ¼å¼è¼¸å‡ºã€‚')">JSONæ ¼å¼</button>
                            <button class="format-btn" onclick="addFormat('è«‹ä»¥æ®µè½å½¢å¼è©³ç´°èªªæ˜ã€‚')">æ®µè½èªªæ˜</button>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="tab-length">
                        <div class="format-buttons">
                            <button class="format-btn" onclick="addFormat('è«‹ä»¥ä¸è¶…é 50 å­—ç°¡æ½”å›ç­”ã€‚')">50å­—å…§</button>
                            <button class="format-btn" onclick="addFormat('è«‹ä»¥ä¸è¶…é 100 å­—èªªæ˜ã€‚')">100å­—å…§</button>
                            <button class="format-btn" onclick="addFormat('è«‹æä¾›è©³ç´°å®Œæ•´çš„åˆ†æã€‚')">è©³ç´°åˆ†æ</button>
                            <button class="format-btn" onclick="addFormat('è«‹æä¾›é‡é»æ‘˜è¦ã€‚')">é‡é»æ‘˜è¦</button>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="tab-structure">
                        <div class="format-buttons">
                            <button class="format-btn" onclick="addFormat('è«‹åˆ† 3-5 å€‹é‡é»èªªæ˜ã€‚')">åˆ†é»èªªæ˜</button>
                            <button class="format-btn" onclick="addFormat('è«‹ä»¥æ­¥é©Ÿå¼æ–¹å¼èªªæ˜ã€‚')">æ­¥é©Ÿèªªæ˜</button>
                            <button class="format-btn" onclick="addFormat('è«‹ä»¥å•ç­”å½¢å¼å‘ˆç¾ã€‚')">å•ç­”å½¢å¼</button>
                            <button class="format-btn" onclick="addFormat('è«‹é€²è¡Œå„ªç¼ºé»æ¯”è¼ƒã€‚')">æ¯”è¼ƒå°ç…§</button>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="tab-style">
                        <div class="format-buttons">
                            <button class="format-btn" onclick="addFormat('è«‹ä½¿ç”¨å°ˆæ¥­è¡“èªé€²è¡Œèªªæ˜ã€‚')">å°ˆæ¥­è¡“èª</button>
                            <button class="format-btn" onclick="addFormat('è«‹ç”¨æ·ºé¡¯æ˜“æ‡‚çš„æ–¹å¼èªªæ˜ã€‚')">æ·ºé¡¯æ˜“æ‡‚</button>
                            <button class="format-btn" onclick="addFormat('è«‹ä»¥å•†æ¥­å ±å‘Šçš„æ ¼å¼å‘ˆç¾ã€‚')">å•†æ¥­å ±å‘Š</button>
                            <button class="format-btn" onclick="addFormat('è«‹ä»¥å­¸è¡“è«–æ–‡çš„é¢¨æ ¼æ’°å¯«ã€‚')">å­¸è¡“é¢¨æ ¼</button>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="tab-special">
                        <div class="format-buttons">
                            <button class="format-btn" onclick="addFormat('è«‹æä¾›å…·é«”ä¾‹å­èªªæ˜ã€‚')">åŒ…å«ä¾‹å­</button>
                            <button class="format-btn" onclick="addFormat('è«‹ç›¡é‡æä¾›ç›¸é—œæ•¸æ“šæ”¯æŒã€‚')">æ•¸æ“šæ”¯æŒ</button>
                            <button class="format-btn" onclick="addFormat('è«‹è©•ä¼°å¯è¡Œæ€§ä¸¦èªªæ˜é¢¨éšªã€‚')">å¯è¡Œæ€§åˆ†æ</button>
                            <button class="format-btn" onclick="addFormat('è«‹æä¾›è¡Œå‹•å»ºè­°ã€‚')">è¡Œå‹•å»ºè­°</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <div class="chatgpt-button-group">
                <button class="btn-action btn-chatgpt" onclick="openInChatGPT()">ğŸ’¬ åœ¨ChatGPTä¸­é–‹å•Ÿ</button>
                <button class="btn-model-selector" onclick="toggleModelSelector()">â–¼</button>
                <div class="model-selector-dropdown" id="modelSelector">
                    <div class="model-option" data-model="o4-mini">o4-mini</div>
                    <div class="model-option" data-model="gpt-4o">GPT-4o</div>
                    <div class="model-option" data-model="gpt-4o-mini">GPT-4o mini</div>
                    <div class="model-option" data-model="gpt-4">GPT-4</div>
                </div>
                <div class="selected-model-display">o4-mini</div>
            </div>
            <button class="btn-action btn-copy" onclick="copyResult()">ğŸ“‹ è¤‡è£½çµæœ</button>
            <button class="btn-action btn-clear" onclick="clearFormats()">ğŸ¨ æ¸…é™¤æ ¼å¼</button>
            <button class="btn-action btn-clear" onclick="clearAll()">ğŸ—‘ï¸ æ¸…ç©ºå…¨éƒ¨</button>
        </div>
    </div>

    <!-- æ¨¡æ¿ç·¨è¼¯ Modal -->
    <div id="templateModal" class="modal">
        <div class="modal-content">
            <h3>âœï¸ ç·¨è¼¯ Prompt æ¨¡æ¿</h3>
            
            <div class="example-selector">
                <h4>ğŸ“š å¿«é€Ÿé¸å–ç¯„ä¾‹ï¼š</h4>
                <select id="exampleSelector" onchange="loadExample()">
                    <option value="">â”€â”€ é¸æ“‡ç¯„ä¾‹æ¨¡æ¿ â”€â”€</option>
                    <option value="å•†å‹™å ´æ™¯.txt">ğŸ’¼ å•†å‹™å ´æ™¯</option>
                    <option value="æ•™è‚²å­¸ç¿’.txt">ğŸ“ æ•™è‚²å­¸ç¿’</option>
                    <option value="å¥åº·ç”Ÿæ´».txt">ğŸ… å¥åº·ç”Ÿæ´»</option>
                    <option value="ç†è²¡æŠ•è³‡.txt">ğŸ’° ç†è²¡æŠ•è³‡</option>
                    <option value="æ–™ç†çƒ¹é£ª.txt">ğŸ³ æ–™ç†çƒ¹é£ª</option>
                    <option value="æ—…éŠè¦åŠƒ.txt">ğŸŒ æ—…éŠè¦åŠƒ</option>
                    <option value="å‰µä½œè¨­è¨ˆ.txt">ğŸ¨ å‰µä½œè¨­è¨ˆ</option>
                    <option value="æŠ€è¡“æ”¯æ´.txt">ğŸ”§ æŠ€è¡“æ”¯æ´</option>
                    <option value="è«‡åˆ¤æºé€š.txt">ğŸ’¬ è«‡åˆ¤æºé€š</option>
                </select>
            </div>
            <textarea id="templateInput" placeholder="è«‹è¼¸å…¥ä½ çš„ prompt æ¨¡æ¿ï¼Œç”¨ [xxx] æ¨™è¨˜éœ€è¦å¡«å…¥çš„åœ°æ–¹ã€‚

ä½ å¯ä»¥ï¼š
â€¢ ç›´æ¥è¼¸å…¥ä½ çš„æ¨¡æ¿
â€¢ ä½¿ç”¨ä¸Šæ–¹ä¸‹æ‹‰é¸å–®é¸æ“‡ç¯„ä¾‹æ¨¡æ¿
â€¢ æ”¯æŒé¸é …æ ¼å¼ï¼š[æ¨™ç±¤ï¼Œä¾‹å¦‚ï¼šé¸é …Aï¼é¸é …B]

ç¯„ä¾‹ï¼š
è«‹å¹«æˆ‘æ‰¾å‡º [ç”¢å“é¡å‹ï¼Œä¾‹å¦‚ï¼š3Cç”¢å“ï¼æœé£¾ï¼é£Ÿå“] åœ¨ [å¸‚å ´å€åŸŸ] çš„ä½¿ç”¨è¡Œç‚ºèˆ‡è³¼è²·è¶¨å‹¢ã€‚"></textarea>
            
            <div class="example">
                <h4>ä½¿ç”¨èªªæ˜ï¼š</h4>
                <p>åœ¨æ¨¡æ¿ä¸­ç”¨æ–¹æ‹¬è™Ÿ <code>[xxx]</code> æ¨™è¨˜éœ€è¦å¡«å…¥çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼š</p>
                <code>è«‹å¹«æˆ‘æ‰¾å‡º [ç”¢å“é¡å‹] åœ¨ [å¸‚å ´å€åŸŸ] çš„ä½¿ç”¨è¡Œç‚ºèˆ‡è³¼è²·è¶¨å‹¢</code>
                <br><br>
                <p>æ”¯æŒé¸é …æ ¼å¼ï¼š <code>[æ¨™ç±¤ï¼Œä¾‹å¦‚ï¼šé¸é …Aï¼é¸é …Bï¼é¸é …C]</code></p>
                <p>ç•¶ä½ ä½¿ç”¨é¸é …æ ¼å¼æ™‚ï¼Œé»æ“Šå ä½ç¬¦æœƒé¡¯ç¤ºå¿«é€Ÿé¸æ“‡æŒ‰éˆ•ï¼Œè®“å¡«å…¥æ›´æ–¹ä¾¿ï¼</p>
                <p><strong>å¿«æ·éµï¼š</strong> Ctrl+C è¤‡è£½çµæœã€Ctrl+Enter åœ¨ ChatGPT ä¸­é–‹å•Ÿ</p>
            </div>
            
            <div class="url-share-section">
                <h4>ğŸ”— åˆ†äº«æ¨¡æ¿</h4>
                <p style="color: #718096; font-size: 14px; margin-bottom: 10px;">
                    å°‡ä½ çš„æ¨¡æ¿æ‰“åŒ…æˆä¸€å€‹é€£çµï¼Œåˆ†äº«çµ¦åŒäº‹ã€æœ‹å‹æˆ–åœ˜éšŠä½¿ç”¨ã€‚<br>
                    ä»–å€‘é»æ“Šé€£çµå°±èƒ½ç›´æ¥è¼‰å…¥ä½ çš„æ¨¡æ¿ï¼Œç„¡éœ€é‡æ–°è¼¸å…¥ï¼
                </p>
                <button class="btn btn-share" onclick="copyTemplateUrl()">ğŸ“‹ è¤‡è£½åˆ†äº«é€£çµ</button>
            </div>
            
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeTemplateEditor()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="saveTemplate()">å„²å­˜æ¨¡æ¿</button>
            </div>
        </div>
    </div>

    <!-- å¡«å…¥å…§å®¹ Modal -->
    <div id="fillModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">å¡«å…¥å…§å®¹</h3>
            <p id="modalHint" style="color: #718096; margin-bottom: 10px;"></p>
            <input type="text" id="modalInput" placeholder="è«‹è¼¸å…¥å…§å®¹...">
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeFillModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="confirmFill()">ç¢ºèª</button>
            </div>
        </div>
    </div>

    <!-- é€šçŸ¥ -->
    <div id="notification" class="notification">
        å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼
    </div>

    <script>
        let currentPlaceholderIndex = -1;
        let placeholders = [];
        let filledValues = {};
        let addedFormats = [];
        let currentTemplate = '';

        // å®šç¾©æ ¼å¼è¡çªè¦å‰‡
        const formatConflicts = {
            // é•·åº¦æ§åˆ¶ - äº’æ–¥
            length: [
                'è«‹ä»¥ä¸è¶…é 50 å­—ç°¡æ½”å›ç­”ã€‚',
                'è«‹ä»¥ä¸è¶…é 100 å­—èªªæ˜ã€‚',
                'è«‹æä¾›è©³ç´°å®Œæ•´çš„åˆ†æã€‚',
                'è«‹æä¾›é‡é»æ‘˜è¦ã€‚'
            ],
            // è¼¸å‡ºæ ¼å¼ - äº’æ–¥
            outputFormat: [
                'è«‹å°‡çµæœä»¥è¡¨æ ¼å½¢å¼è¼¸å‡ºã€‚',
                'è«‹å°‡çµæœä»¥æ¢åˆ—å¼å‘ˆç¾ã€‚',
                'è«‹å°‡çµæœä»¥ JSON æ ¼å¼è¼¸å‡ºã€‚',
                'è«‹ä»¥æ®µè½å½¢å¼è©³ç´°èªªæ˜ã€‚'
            ],
            // çµæ§‹è¦æ±‚ - éƒ¨åˆ†äº’æ–¥
            structure: [
                'è«‹åˆ† 3-5 å€‹é‡é»èªªæ˜ã€‚',
                'è«‹ä»¥æ­¥é©Ÿå¼æ–¹å¼èªªæ˜ã€‚',
                'è«‹ä»¥å•ç­”å½¢å¼å‘ˆç¾ã€‚'
            ],
            // èªè¨€é¢¨æ ¼ - äº’æ–¥
            style: [
                'è«‹ä½¿ç”¨å°ˆæ¥­è¡“èªé€²è¡Œèªªæ˜ã€‚',
                'è«‹ç”¨æ·ºé¡¯æ˜“æ‡‚çš„æ–¹å¼èªªæ˜ã€‚',
                'è«‹ä»¥å•†æ¥­å ±å‘Šçš„æ ¼å¼å‘ˆç¾ã€‚',
                'è«‹ä»¥å­¸è¡“è«–æ–‡çš„é¢¨æ ¼æ’°å¯«ã€‚'
            ]
        };

        const templateDisplay = document.getElementById('templateDisplay');
        const templateModal = document.getElementById('templateModal');
        const fillModal = document.getElementById('fillModal');
        const templateInput = document.getElementById('templateInput');
        const modalInput = document.getElementById('modalInput');
        const modalTitle = document.getElementById('modalTitle');
        const modalHint = document.getElementById('modalHint');

        // è‡ªå‹•èª¿æ•´ textarea é«˜åº¦
        function autoResizeTextarea(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        // åˆå§‹åŒ–
        loadDefaultTemplate();
        
        // ç‚º templateInput æ·»åŠ è‡ªå‹•èª¿æ•´é«˜åº¦çš„äº‹ä»¶ç›£è½
        templateInput.addEventListener('input', function() {
            autoResizeTextarea(this);
        });
        
        templateInput.addEventListener('paste', function() {
            setTimeout(() => autoResizeTextarea(this), 10);
        });

        function switchTab(tabId) {
            // ç§»é™¤æ‰€æœ‰ tab çš„ active ç‹€æ…‹
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });

            // æ¿€æ´»é¸ä¸­çš„ tab
            event.target.classList.add('active');
            document.getElementById(`tab-${tabId}`).classList.add('active');
        }

        function loadDefaultTemplate() {
            // é¦–å…ˆæª¢æŸ¥ URL åƒæ•¸æ˜¯å¦æœ‰æ¨¡æ¿
            const urlParams = new URLSearchParams(window.location.search);
            const urlTemplate = urlParams.get('prompt');
            
            if (urlTemplate) {
                try {
                    // URLSearchParams å·²ç¶“è‡ªå‹•è§£ç¢¼äº†ï¼Œä¸éœ€è¦å†æ¬¡ decodeURIComponent
                    currentTemplate = urlTemplate;
                    templateInput.value = currentTemplate;
                    parseTemplate();
                    autoResizeTextarea(templateInput);
                    console.log('å¾ URL è¼‰å…¥æ¨¡æ¿:', currentTemplate);
                    return;
                } catch (error) {
                    console.error('è§£æ URL åƒæ•¸å¤±æ•—:', error);
                    // å¦‚æœè§£æå¤±æ•—ï¼Œç¹¼çºŒä½¿ç”¨é è¨­æ¨¡æ¿
                }
            }
            
            // ä½¿ç”¨ç©ºç™½æ¨¡æ¿
            currentTemplate = '';
            templateInput.value = currentTemplate;
            parseTemplate();
        }

        // ç¯„ä¾‹æ¨¡æ¿å…§å®¹
        const exampleTemplates = {
            'å•†å‹™å ´æ™¯.txt': `è«‹æ‰®æ¼” [è§’è‰²ï¼Œä¾‹å¦‚ï¼šè³‡æ·±æ¥­å‹™ç¶“ç† / å¸‚å ´è¡ŒéŠ·å°ˆå®¶ / å®¢æˆ¶é—œä¿‚ç¶“ç†]ï¼Œå”åŠ©æˆ‘ [ä»»å‹™ï¼Œä¾‹å¦‚ï¼šåˆ†æå¸‚å ´è¶¨å‹¢ / åˆ¶å®šè¡ŒéŠ·ç­–ç•¥ / æå‡å®¢æˆ¶æ»¿æ„åº¦]ã€‚

è«‹ä½¿ç”¨ [æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šæ•¸æ“šåˆ†æ / ç«¶çˆ­å°æ‰‹ç ”ç©¶ / å®¢æˆ¶è¨ªè«‡] ä¾†é”æˆç›®æ¨™ï¼Œä¸¦ä»¥ [è¼¸å‡ºæ ¼å¼ï¼Œä¾‹å¦‚ï¼šå ±å‘Š / ç°¡å ± / è¡Œå‹•è¨ˆç•«] çš„å½¢å¼å‘ˆç¾çµæœã€‚`,
            
            'æ•™è‚²å­¸ç¿’.txt': `æˆ‘å¸Œæœ›ä½ æˆç‚ºæˆ‘çš„ [æ•™å­¸è§’è‰²ï¼Œä¾‹å¦‚ï¼šç¨‹å¼è¨­è¨ˆå°å¸«ï¼èªè¨€å­¸ç¿’æ•™ç·´ï¼æ•¸å­¸è§£é¡ŒåŠ©æ‰‹]ï¼Œå¹«åŠ©æˆ‘å­¸ç¿’ [å­¸ç¿’ä¸»é¡Œï¼Œä¾‹å¦‚ï¼šPythonç¨‹å¼è¨­è¨ˆï¼è‹±æ–‡æœƒè©±ï¼å¾®ç©åˆ†]ã€‚

è«‹ä½¿ç”¨ [æ•™å­¸æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šäº’å‹•å¼å•ç­”ï¼å¯¦ä½œç·´ç¿’ï¼æ¡ˆä¾‹åˆ†æ] ä¾†é€²è¡Œæ•™å­¸ï¼Œä¸¦æ ¹æ“šæˆ‘çš„ [å­¸ç¿’ç¨‹åº¦ï¼Œä¾‹å¦‚ï¼šåˆå­¸è€…ï¼ä¸­ç´šç¨‹åº¦ï¼é€²éšå­¸ç¿’è€…] èª¿æ•´æ•™å­¸å…§å®¹ã€‚

åœ¨æ•™å­¸éç¨‹ä¸­ï¼Œè«‹ç‰¹åˆ¥æ³¨æ„ [å­¸ç¿’é‡é»ï¼Œä¾‹å¦‚ï¼šåŸºç¤æ¦‚å¿µç†è§£ï¼å¯¦éš›æ‡‰ç”¨ç·´ç¿’ï¼è§£é¡ŒæŠ€å·§æŒæ¡]ï¼Œä¸¦æä¾› [å›é¥‹æ–¹å¼ï¼Œä¾‹å¦‚ï¼šå³æ™‚ç³¾æ­£ï¼éšæ®µæ€§æ¸¬é©—ï¼å­¸ç¿’é€²åº¦è¿½è¹¤]ã€‚`,
            
            'å¥åº·ç”Ÿæ´».txt': `è«‹æ‰®æ¼” [å¥åº·å°ˆå®¶ï¼Œä¾‹å¦‚ï¼šç‡Ÿé¤Šå¸« / å¥èº«æ•™ç·´ / å¿ƒç†å¥åº·é¡§å•]ï¼Œé‡å°æˆ‘çš„ [å¥åº·ç›®æ¨™ï¼Œä¾‹å¦‚ï¼šæ¸›é‡10å…¬æ–¤ / å¢åŠ è‚Œè‚‰é‡ / æ”¹å–„ç¡çœ å“è³ª] æä¾›å»ºè­°ã€‚

è€ƒæ…®åˆ°æˆ‘çš„ [å€‹äººæƒ…æ³ï¼Œä¾‹å¦‚ï¼šå·¥ä½œç¹å¿™ / æœ‰é‹å‹•ç¿’æ…£ / åå¥½ç´ é£Ÿ] å’Œ [æ™‚é–“é™åˆ¶ï¼Œä¾‹å¦‚ï¼šæ¯å¤©30åˆ†é˜ / é€±æœ«æ‰æœ‰æ™‚é–“ / å½ˆæ€§å®‰æ’]ï¼Œè«‹åˆ¶å®šå¯è¡Œçš„è¨ˆç•«ã€‚

è«‹æä¾› [å»ºè­°é¡å‹ï¼Œä¾‹å¦‚ï¼šé£²é£Ÿèª¿æ•´å»ºè­°ï¼é‹å‹•è¨“ç·´è¨ˆç•«ï¼ç”Ÿæ´»ç¿’æ…£æ”¹å–„]ï¼Œä¸¦èªªæ˜ [åŸ·è¡Œæ–¹å¼ï¼Œä¾‹å¦‚ï¼šæ¯æ—¥åŸ·è¡Œæ¸…å–®ï¼é€±ç¨‹å®‰æ’ï¼æœˆåº¦æª¢æ ¸]ã€‚`,
            
            'ç†è²¡æŠ•è³‡.txt': `æˆ‘éœ€è¦ä¸€ä½ [ç†è²¡é¡§å•ï¼Œä¾‹å¦‚ï¼šæŠ•è³‡åˆ†æå¸«ï¼è²¡å‹™è¦åŠƒå¸«ï¼ä¿éšªå°ˆå®¶] å¹«åŠ©æˆ‘é€²è¡Œ [ç†è²¡è¦åŠƒï¼Œä¾‹å¦‚ï¼šé€€ä¼‘è¦åŠƒï¼å­å¥³æ•™è‚²åŸºé‡‘ï¼æˆ¿å±‹è³¼è²·è¨ˆç•«]ã€‚

æˆ‘çš„ [é¢¨éšªæ‰¿å—åº¦ï¼Œä¾‹å¦‚ï¼šä¿å®ˆå‹ï¼å¹³è¡¡å‹ï¼ç©æ¥µå‹] æŠ•è³‡è€…ï¼Œæ¯æœˆå¯æŠ•è³‡é‡‘é¡ç‚º [æŠ•è³‡é‡‘é¡ï¼Œä¾‹å¦‚ï¼š1è¬å…ƒä»¥ä¸‹ï¼1-3è¬å…ƒï¼3è¬å…ƒä»¥ä¸Š]ï¼ŒæŠ•è³‡æœŸé–“ç‚º [æŠ•è³‡æœŸé–“ï¼Œä¾‹å¦‚ï¼šçŸ­æœŸ(1-3å¹´)ï¼ä¸­æœŸ(3-10å¹´)ï¼é•·æœŸ(10å¹´ä»¥ä¸Š)]ã€‚

è«‹æä¾› [æŠ•è³‡å»ºè­°ï¼Œä¾‹å¦‚ï¼šè³‡ç”¢é…ç½®å»ºè­°ï¼å…·é«”æŠ•è³‡æ¨™çš„ï¼é¢¨éšªæ§åˆ¶ç­–ç•¥]ï¼Œä¸¦èªªæ˜ [åŸ·è¡Œæ­¥é©Ÿï¼Œä¾‹å¦‚ï¼šé–‹æˆ¶æµç¨‹ï¼æŠ•è³‡æ™‚æ©Ÿï¼å®šæœŸæª¢è¦–]ã€‚`,
            
            'æ–™ç†çƒ¹é£ª.txt': `è«‹æˆç‚ºæˆ‘çš„ [æ–™ç†æŒ‡å°ï¼Œä¾‹å¦‚ï¼šä¸­å¼æ–™ç†å¸«å‚…ï¼è¥¿å¼çƒ¹é£ªå°ˆå®¶ï¼çƒ˜ç„™é”äºº]ï¼Œæ•™æˆ‘è£½ä½œ [æ–™ç†é¡å‹ï¼Œä¾‹å¦‚ï¼šå®¶å¸¸èœï¼ç¯€æ…¶æ–™ç†ï¼å¥åº·è¼•é£Ÿ]ã€‚

è€ƒæ…®åˆ°æˆ‘çš„ [çƒ¹é£ªç¨‹åº¦ï¼Œä¾‹å¦‚ï¼šæ–°æ‰‹ï¼æœ‰åŸºç¤ï¼é€²éš] å’Œ [è¨­å‚™é™åˆ¶ï¼Œä¾‹å¦‚ï¼šåªæœ‰é›»é‹ï¼å®Œæ•´å»šæˆ¿ï¼ç°¡æ˜“è¨­å‚™]ï¼Œè«‹æä¾› [é›£åº¦ç­‰ç´šï¼Œä¾‹å¦‚ï¼šç°¡å–®æ˜“åšï¼ä¸­ç­‰é›£åº¦ï¼æŒ‘æˆ°æ€§é«˜] çš„é£Ÿè­œã€‚

è«‹åŒ…å« [é£Ÿè­œå…§å®¹ï¼Œä¾‹å¦‚ï¼šè©³ç´°æ­¥é©Ÿï¼ç‡Ÿé¤Šåˆ†æï¼è®ŠåŒ–å»ºè­°] å’Œ [å¯¦ç”¨æé†’ï¼Œä¾‹å¦‚ï¼šé£ŸææŒ‘é¸è¦é»ï¼ä¿å­˜æ–¹æ³•ï¼å¤±æ•—è™•ç†]ã€‚`,
            
            'æ—…éŠè¦åŠƒ.txt': `è«‹æ‰®æ¼” [æ—…éŠå°ˆå®¶ï¼Œä¾‹å¦‚ï¼šæ—…éŠè¦åŠƒå¸«ï¼ç•¶åœ°å°éŠï¼èƒŒåŒ…å®¢é”äºº]ï¼Œå”åŠ©æˆ‘è¦åŠƒ [æ—…éŠç›®çš„åœ°ï¼Œä¾‹å¦‚ï¼šæ—¥æœ¬é—œè¥¿ï¼æ­æ´²å¤šåœ‹ï¼æ±å—äº] çš„æ—…ç¨‹ã€‚

æˆ‘çš„æ—…éŠé¡å‹æ˜¯ [æ—…éŠé¢¨æ ¼ï¼Œä¾‹å¦‚ï¼šæ–‡åŒ–æ·±åº¦éŠï¼ç¾é£Ÿæ¢ç´¢ï¼è‡ªç„¶æ™¯è§€ï¼è³¼ç‰©è¡€æ‹¼]ï¼Œé ç®—ç¯„åœç‚º [é ç®—ï¼Œä¾‹å¦‚ï¼šç¶“æ¿Ÿå‹ï¼ä¸­ç­‰é ç®—ï¼è±ªè¯æ—…éŠ]ï¼Œæ—…éŠå¤©æ•¸ç‚º [å¤©æ•¸ï¼Œä¾‹å¦‚ï¼š3-5å¤©ï¼ä¸€é€±ï¼10å¤©ä»¥ä¸Š]ã€‚

è«‹æä¾› [æ—…éŠè¦åŠƒï¼Œä¾‹å¦‚ï¼šè¡Œç¨‹å®‰æ’ï¼ä½å®¿æ¨è–¦ï¼äº¤é€šæ–¹å¼] å’Œ [å¯¦ç”¨è³‡è¨Šï¼Œä¾‹å¦‚ï¼šå¿…è²·ä¼´æ‰‹ç¦®ï¼æ³¨æ„äº‹é …ï¼ç·Šæ€¥è¯çµ¡æ–¹å¼]ã€‚`,
            
            'å‰µä½œè¨­è¨ˆ.txt': `æˆ‘å¸Œæœ›ä½ æˆç‚º [å‰µæ„å°å¸«ï¼Œä¾‹å¦‚ï¼šå¹³é¢è¨­è¨ˆå¸«ï¼æ–‡æ¡ˆå‰µä½œè€…ï¼å½±ç‰‡è£½ä½œäºº]ï¼ŒæŒ‡å°æˆ‘å®Œæˆ [å‰µä½œå°ˆæ¡ˆï¼Œä¾‹å¦‚ï¼šå“ç‰ŒLOGOè¨­è¨ˆï¼ç¤¾ç¾¤åª’é«”æ–‡æ¡ˆï¼ç”¢å“ä»‹ç´¹å½±ç‰‡]ã€‚

ç›®æ¨™å—çœ¾æ˜¯ [å—çœ¾ç¾¤é«”ï¼Œä¾‹å¦‚ï¼šå¹´è¼•æ—ç¾¤ï¼å°ˆæ¥­äººå£«ï¼å®¶åº­ç”¨æˆ¶]ï¼Œé¢¨æ ¼åå¥½ç‚º [è¨­è¨ˆé¢¨æ ¼ï¼Œä¾‹å¦‚ï¼šç°¡ç´„ç¾ä»£ï¼æ´»æ½‘æœ‰è¶£ï¼å°ˆæ¥­ç©©é‡]ï¼Œéœ€è¦åœ¨ [æ™‚é–“é™åˆ¶ï¼Œä¾‹å¦‚ï¼šæœ¬é€±å…§ï¼ä¸€å€‹æœˆå…§ï¼æ²’æœ‰æ€¥è¿«æ€§] å®Œæˆã€‚

è«‹æä¾› [å‰µä½œæŒ‡å°ï¼Œä¾‹å¦‚ï¼šè¨­è¨ˆæ¦‚å¿µï¼å‰µæ„ç™¼æƒ³ï¼æŠ€è¡“å»ºè­°] å’Œ [åŸ·è¡Œç´°ç¯€ï¼Œä¾‹å¦‚ï¼šå·¥å…·æ¨è–¦ï¼æµç¨‹å®‰æ’ï¼å“è³ªæª¢æ ¸]ã€‚`,
            
            'æŠ€è¡“æ”¯æ´.txt': `è«‹æ“”ä»» [æŠ€è¡“å°ˆå®¶ï¼Œä¾‹å¦‚ï¼šç¨‹å¼é–‹ç™¼è€…ï¼ç³»çµ±ç®¡ç†å“¡ï¼è³‡æ–™åˆ†æå¸«]ï¼Œå”åŠ©æˆ‘è§£æ±º [æŠ€è¡“å•é¡Œï¼Œä¾‹å¦‚ï¼šç¨‹å¼é™¤éŒ¯ï¼ç³»çµ±å„ªåŒ–ï¼è³‡æ–™è™•ç†]ã€‚

æˆ‘çš„æŠ€è¡“èƒŒæ™¯æ˜¯ [æŠ€è¡“æ°´å¹³ï¼Œä¾‹å¦‚ï¼šåˆå­¸è€…ï¼æœ‰åŸºç¤ï¼è³‡æ·±å·¥ç¨‹å¸«]ï¼Œä½¿ç”¨çš„æŠ€è¡“ç’°å¢ƒç‚º [æŠ€è¡“ç’°å¢ƒï¼Œä¾‹å¦‚ï¼šWindowsï¼Macï¼Linux]ï¼ŒæœŸæœ›çš„è§£æ±ºæ–¹æ¡ˆæ ¼å¼ç‚º [è§£æ±ºæ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼šstep-by-stepæ•™å­¸ï¼ç¨‹å¼ç¢¼ç¯„ä¾‹ï¼æ¶æ§‹å»ºè­°]ã€‚

è«‹æä¾› [æŠ€è¡“æŒ‡å°ï¼Œä¾‹å¦‚ï¼šå•é¡Œåˆ†æï¼è§£æ±ºæ­¥é©Ÿï¼æœ€ä½³å¯¦è¸] å’Œ [å­¸ç¿’è³‡æºï¼Œä¾‹å¦‚ï¼šç›¸é—œæ–‡ä»¶ï¼é€²éšæ•™æï¼ç¤¾ç¾¤æ¨è–¦]ã€‚`,
            
            'è«‡åˆ¤æºé€š.txt': `æˆ‘å¸Œæœ›ä½ æˆç‚ºæˆ‘çš„ [è§’è‰²ï¼Œä¾‹å¦‚ï¼šè³‡æ·±è«‡åˆ¤æ•™ç·´ï¼å•†å‹™ç­–ç•¥é¡§å•ï¼è·¨æ–‡åŒ–è«‡åˆ¤å°ˆå®¶]ï¼Œä½ çš„ç›®æ¨™æ˜¯å”åŠ©æˆ‘ [ä¸»è¦ä»»å‹™ï¼Œä¾‹å¦‚ï¼šæ¨¡æ“¬å³å°‡é€²è¡Œçš„è«‡åˆ¤ï¼åˆ¶å®šè«‡åˆ¤ç­–ç•¥ï¼è©•ä¼°è«‡åˆ¤é¢¨éšª]ï¼Œé€é [æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šæå•èˆ‡è¨è«–ï¼æ¡ˆä¾‹åˆ†æï¼è§’è‰²æ‰®æ¼”] å¹«åŠ©æˆ‘ [ç›®çš„ï¼Œä¾‹å¦‚ï¼šè¨­è¨ˆç­–ç•¥èˆ‡æŒæ¡è¦é»ï¼é æ¸¬å°æ–¹ç«‹å ´ï¼å¼·åŒ–è«‡åˆ¤æŠ€å·§]ï¼Œä¸¦æé†’æˆ‘ [æé†’äº‹é …ï¼Œä¾‹å¦‚ï¼šæª¢è¦–ç›®æ¨™èˆ‡å¯èƒ½çš„å½±éŸ¿ï¼é—œæ³¨è«‡åˆ¤æ™‚æ©Ÿï¼è©•ä¼°æ›¿ä»£æ–¹æ¡ˆ]ã€‚

ä½ å°‡æŒ‰ç…§ä»¥ä¸‹æ–¹å¼é€²è¡Œå°è©±ï¼š
1. ç¢ºèª [æ­¥é©Ÿä¸€åç¨±ï¼Œä¾‹å¦‚ï¼šè«‡åˆ¤ä¸»é¡Œç¢ºèªï¼èƒŒæ™¯æ”¶é›†]ï¼šé¦–å…ˆè©¢å•ä¸¦ç¢ºèªæˆ‘å¸Œæœ›æ¨¡æ“¬çš„ [ä¸»é¡Œï¼Œä¾‹å¦‚ï¼šè–ªè³‡å”å•†ï¼åˆåŒè«‡åˆ¤ï¼æ¡è³¼è­°åƒ¹] èˆ‡ [èƒŒæ™¯æƒ…å¢ƒï¼Œä¾‹å¦‚ï¼šåˆæ¬¡é¢è«‡ï¼å¹´åº¦åˆç´„çºŒç°½ï¼è·¨åœ‹äº¤æ˜“]ã€‚
2. [æ­¥é©ŸäºŒåç¨±ï¼Œä¾‹å¦‚ï¼šæå•å°å‘ï¼æ·±åº¦æ¢ç´¢]ï¼šæ ¹æ“šè¨­å®šçš„ä¸»é¡Œï¼Œé€éæå•å¹«åŠ©æˆ‘æ·±å…¥æ€è€ƒ [ç­–ç•¥è¦é»ï¼Œä¾‹å¦‚ï¼šåº•ç·šè¨­å®šï¼åƒ¹å€¼äº¤æ›æ–¹æ¡ˆ]ã€[å°æ–¹ç«‹å ´ï¼Œä¾‹å¦‚ï¼šåˆ©ç›Šé—œåˆ‡ï¼æ½›åœ¨é¡§æ…®]ï¼Œå¿…è¦æ™‚ç›´æ¥å‘Šè¨´æˆ‘å¯èƒ½çš„ [è§£æ±ºæ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼šè®“æ­¥ç­–ç•¥ï¼æ›¿ä»£ææ¡ˆ]ã€‚
3. [æ­¥é©Ÿä¸‰åç¨±ï¼Œä¾‹å¦‚ï¼šæ‘˜è¦èˆ‡ç¸½çµï¼é—œéµå›é¡§]ï¼šåœ¨é©ç•¶æ™‚æ©Ÿé€²è¡Œç°¡çŸ­çš„æ‘˜è¦æˆ–ç¸½çµï¼Œè®“æˆ‘æ¸…æ¥šäº†è§£ [é—œéµé»ï¼Œä¾‹å¦‚ï¼šæ ¸å¿ƒåˆ©ç›Šï¼é¢¨éšªå› ç´ ] èˆ‡ [å¯è¡Œç­–ç•¥ï¼Œä¾‹å¦‚ï¼šé€²æ”»æ–¹æ¡ˆï¼é˜²å®ˆé¸é …]ã€‚`
        };

        function loadExample() {
            const selector = document.getElementById('exampleSelector');
            const selectedFile = selector.value;
            
            if (!selectedFile) {
                return;
            }
            
            const templateContent = exampleTemplates[selectedFile];
            if (templateContent) {
                currentTemplate = templateContent.trim();
                templateInput.value = currentTemplate;
                parseTemplate();
                autoResizeTextarea(templateInput);
                showNotification(`âœ… å·²è¼‰å…¥ã€Œ${selector.options[selector.selectedIndex].text.replace(/^\S+\s/, '')}ã€ç¯„ä¾‹`);
            } else {
                showNotification('âŒ æ‰¾ä¸åˆ°ç¯„ä¾‹æ¨¡æ¿', '#f56565');
            }
        }

        function openTemplateEditor() {
            templateModal.style.display = 'block';
            templateInput.focus();
            autoResizeTextarea(templateInput);
        }

        function closeTemplateEditor() {
            templateModal.style.display = 'none';
        }

        function saveTemplate() {
            currentTemplate = templateInput.value.trim();
            if (currentTemplate) {
                parseTemplate();
                closeTemplateEditor();
            }
        }

        function parseTemplate() {
            if (!currentTemplate) {
                templateDisplay.innerHTML = '<div class="empty-template">è«‹é»æ“Šã€Œç·¨è¼¯æ¨¡æ¿ã€é–‹å§‹è¨­å®šä½ çš„ prompt æ¨¡æ¿ï¼Œæˆ–ä½¿ç”¨ç·¨è¼¯å™¨ä¸­çš„ç¯„ä¾‹é¸æ“‡å™¨...</div>';
                return;
            }

            // é‡ç½®å¡«å…¥å€¼ä½†ä¿ç•™æ ¼å¼
            filledValues = {};
            
            // æ‰¾å‡ºæ‰€æœ‰å ä½ç¬¦
            const placeholderRegex = /\[([^\]]+)\]/g;
            placeholders = [];
            let match;
            
            while ((match = placeholderRegex.exec(currentTemplate)) !== null) {
                const content = match[1];
                const placeholder = {
                    full: match[0],
                    content: content,
                    index: placeholders.length
                };
                
                // æª¢æŸ¥æ˜¯å¦åŒ…å«é¸é …ï¼ˆä»¥ ï¼ æˆ– / åˆ†éš”ï¼‰
                if (content.includes('ï¼') || content.includes('/')) {
                    const parts = content.split('ï¼Œ');
                    if (parts.length >= 2) {
                        placeholder.label = parts[0];
                        const optionPart = parts.slice(1).join('ï¼Œ');
                        if (optionPart.includes('ä¾‹å¦‚ï¼š')) {
                            const examplePart = optionPart.split('ä¾‹å¦‚ï¼š')[1];
                            if (examplePart) {
                                // åŒæ™‚æ”¯æ´å…¨å½¢å’ŒåŠå½¢æ–œç·šåˆ†éš”
                                const options = examplePart.includes('ï¼') ? 
                                    examplePart.split('ï¼') : 
                                    examplePart.split('/');
                                placeholder.options = options.map(opt => opt.trim().replace(/[\[\]]/g, ''));
                                placeholder.hasOptions = true;
                            }
                        }
                    }
                }
                
                placeholders.push(placeholder);
            }

            renderTemplate();
        }

        function renderTemplate() {
            let template = currentTemplate;
            
            placeholders.forEach((placeholder, index) => {
                const value = filledValues[index];
                let displayText;
                let titleText;
                
                if (placeholder.hasOptions && placeholder.label) {
                    displayText = value || placeholder.label;
                    titleText = `é»æ“Šå¡«å…¥: ${placeholder.label}`;
                } else {
                    displayText = value || placeholder.content;
                    titleText = `é»æ“Šå¡«å…¥: ${placeholder.content}`;
                }
                
                const isFilledClass = value ? 'filled' : '';
                const span = `<span class="placeholder ${isFilledClass}" onclick="openFillModal(${index})" title="${titleText}">${displayText}</span>`;
                template = template.replace(placeholder.full, span);
            });

            // å°‡æ›è¡Œç¬¦è½‰æ›ç‚º HTML æ›è¡Œæ¨™ç±¤
            template = template.replace(/\n/g, '<br>');

            // æ·»åŠ æ ¼å¼è¦æ±‚
            if (addedFormats.length > 0) {
                template += '<br><br>';
                addedFormats.forEach((format, index) => {
                    template += `<div class="added-format">${format}<button class="remove-format" onclick="removeFormat(${index})" title="ç§»é™¤æ­¤æ ¼å¼">Ã—</button></div>`;
                });
            }

            templateDisplay.innerHTML = template;
            updateButtonStates();
        }

        function openFillModal(index) {
            currentPlaceholderIndex = index;
            const placeholder = placeholders[index];
            
            // æ¸…ç©ºä¹‹å‰çš„å…§å®¹
            const modalContent = fillModal.querySelector('.modal-content');
            const existingOptions = modalContent.querySelector('.option-buttons');
            if (existingOptions) {
                existingOptions.remove();
            }
            
            const displayText = placeholder.label || placeholder.content;
            modalTitle.textContent = `å¡«å…¥ï¼š${displayText}`;
            modalHint.textContent = `è«‹ç‚ºã€Œ${displayText}ã€è¼¸å…¥å…·é«”å…§å®¹`;
            modalInput.value = filledValues[index] || '';
            
            // å¦‚æœæœ‰é¸é …ï¼Œæ·»åŠ é¸é …æŒ‰éˆ•
            if (placeholder.hasOptions && placeholder.options) {
                const optionContainer = document.createElement('div');
                optionContainer.className = 'option-buttons';
                optionContainer.style.cssText = `
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                    gap: 8px;
                    margin: 15px 0;
                    padding: 15px;
                    background: #f8fafc;
                    border-radius: 8px;
                    border: 1px solid #e2e8f0;
                `;
                
                const optionTitle = document.createElement('div');
                optionTitle.textContent = 'å¿«é€Ÿé¸æ“‡ï¼š';
                optionTitle.style.cssText = `
                    grid-column: 1 / -1;
                    font-size: 14px;
                    font-weight: 500;
                    color: #4a5568;
                    margin-bottom: 8px;
                `;
                optionContainer.appendChild(optionTitle);
                
                placeholder.options.forEach(option => {
                    const optionBtn = document.createElement('button');
                    optionBtn.textContent = option;
                    optionBtn.className = 'option-btn';
                    optionBtn.style.cssText = `
                        padding: 8px 12px;
                        border: 2px solid #e2e8f0;
                        background: white;
                        border-radius: 6px;
                        cursor: pointer;
                        font-size: 13px;
                        font-weight: 500;
                        color: #4a5568;
                        transition: all 0.2s ease;
                    `;
                    
                    optionBtn.addEventListener('mouseenter', () => {
                        optionBtn.style.borderColor = '#667eea';
                        optionBtn.style.background = '#f7fafc';
                        optionBtn.style.color = '#667eea';
                    });
                    
                    optionBtn.addEventListener('mouseleave', () => {
                        optionBtn.style.borderColor = '#e2e8f0';
                        optionBtn.style.background = 'white';
                        optionBtn.style.color = '#4a5568';
                    });
                    
                    optionBtn.addEventListener('click', () => {
                        modalInput.value = option;
                        modalInput.focus();
                    });
                    
                    optionContainer.appendChild(optionBtn);
                });
                
                // æ·»åŠ ã€Œå…¶ä»–ã€é¸é …
                const otherBtn = document.createElement('button');
                otherBtn.textContent = 'å…¶ä»–...';
                otherBtn.className = 'option-btn';
                otherBtn.style.cssText = `
                    padding: 8px 12px;
                    border: 2px solid #fbbf24;
                    background: #fef3c7;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 13px;
                    font-weight: 500;
                    color: #92400e;
                    transition: all 0.2s ease;
                `;
                
                otherBtn.addEventListener('mouseenter', () => {
                    otherBtn.style.borderColor = '#f59e0b';
                    otherBtn.style.background = '#fde68a';
                });
                
                otherBtn.addEventListener('mouseleave', () => {
                    otherBtn.style.borderColor = '#fbbf24';
                    otherBtn.style.background = '#fef3c7';
                });
                
                otherBtn.addEventListener('click', () => {
                    modalInput.value = '';
                    modalInput.focus();
                });
                
                optionContainer.appendChild(otherBtn);
                
                const inputElement = modalContent.querySelector('#modalInput');
                inputElement.parentNode.insertBefore(optionContainer, inputElement);
            }
            
            fillModal.style.display = 'block';
            setTimeout(() => modalInput.focus(), 100);
        }

        function closeFillModal() {
            fillModal.style.display = 'none';
            currentPlaceholderIndex = -1;
        }

        function confirmFill() {
            const value = modalInput.value.trim();
            
            if (value && currentPlaceholderIndex >= 0) {
                filledValues[currentPlaceholderIndex] = value;
                renderTemplate();
            }
            
            closeFillModal();
        }

        function addFormat(formatText) {
            // æª¢æŸ¥æ˜¯å¦å·²ç¶“å­˜åœ¨å®Œå…¨ç›¸åŒçš„æ ¼å¼
            if (addedFormats.includes(formatText)) {
                return;
            }

            // æª¢æŸ¥è¡çªä¸¦ç§»é™¤è¡çªçš„æ ¼å¼
            for (const [category, formats] of Object.entries(formatConflicts)) {
                if (formats.includes(formatText)) {
                    // ç§»é™¤åŒé¡åˆ¥çš„å…¶ä»–æ ¼å¼
                    addedFormats = addedFormats.filter(existing => !formats.includes(existing));
                    break;
                }
            }

            // æ·»åŠ æ–°æ ¼å¼
            addedFormats.push(formatText);
            renderTemplate();
            
            // è¦–è¦ºåé¥‹
            highlightFormatButton(formatText);
        }

        function highlightFormatButton(formatText) {
            const buttons = document.querySelectorAll('.format-btn');
            buttons.forEach(btn => {
                if (btn.textContent === getButtonText(formatText)) {
                    btn.style.background = 'linear-gradient(45deg, #48bb78, #38a169)';
                    btn.style.color = 'white';
                    btn.style.transform = 'scale(1.05)';
                    
                    setTimeout(() => {
                        btn.style.background = '';
                        btn.style.color = '';
                        btn.style.transform = '';
                        updateButtonStates(); // ç¢ºä¿ç‹€æ…‹æ­£ç¢ºæ›´æ–°
                    }, 300);
                }
            });
        }

        function getButtonText(formatText) {
            const buttonMap = {
                'è«‹å°‡çµæœä»¥è¡¨æ ¼å½¢å¼è¼¸å‡ºã€‚': 'è¡¨æ ¼æ ¼å¼',
                'è«‹å°‡çµæœä»¥æ¢åˆ—å¼å‘ˆç¾ã€‚': 'æ¢åˆ—æ¸…å–®',
                'è«‹å°‡çµæœä»¥ JSON æ ¼å¼è¼¸å‡ºã€‚': 'JSONæ ¼å¼',
                'è«‹ä»¥æ®µè½å½¢å¼è©³ç´°èªªæ˜ã€‚': 'æ®µè½èªªæ˜',
                'è«‹ä»¥ä¸è¶…é 50 å­—ç°¡æ½”å›ç­”ã€‚': '50å­—å…§',
                'è«‹ä»¥ä¸è¶…é 100 å­—èªªæ˜ã€‚': '100å­—å…§',
                'è«‹æä¾›è©³ç´°å®Œæ•´çš„åˆ†æã€‚': 'è©³ç´°åˆ†æ',
                'è«‹æä¾›é‡é»æ‘˜è¦ã€‚': 'é‡é»æ‘˜è¦',
                'è«‹åˆ† 3-5 å€‹é‡é»èªªæ˜ã€‚': 'åˆ†é»èªªæ˜',
                'è«‹ä»¥æ­¥é©Ÿå¼æ–¹å¼èªªæ˜ã€‚': 'æ­¥é©Ÿèªªæ˜',
                'è«‹ä»¥å•ç­”å½¢å¼å‘ˆç¾ã€‚': 'å•ç­”å½¢å¼',
                'è«‹é€²è¡Œå„ªç¼ºé»æ¯”è¼ƒã€‚': 'æ¯”è¼ƒå°ç…§',
                'è«‹ä½¿ç”¨å°ˆæ¥­è¡“èªé€²è¡Œèªªæ˜ã€‚': 'å°ˆæ¥­è¡“èª',
                'è«‹ç”¨æ·ºé¡¯æ˜“æ‡‚çš„æ–¹å¼èªªæ˜ã€‚': 'æ·ºé¡¯æ˜“æ‡‚',
                'è«‹ä»¥å•†æ¥­å ±å‘Šçš„æ ¼å¼å‘ˆç¾ã€‚': 'å•†æ¥­å ±å‘Š',
                'è«‹ä»¥å­¸è¡“è«–æ–‡çš„é¢¨æ ¼æ’°å¯«ã€‚': 'å­¸è¡“é¢¨æ ¼',
                'è«‹æä¾›å…·é«”ä¾‹å­èªªæ˜ã€‚': 'åŒ…å«ä¾‹å­',
                'è«‹ç›¡é‡æä¾›ç›¸é—œæ•¸æ“šæ”¯æŒã€‚': 'æ•¸æ“šæ”¯æŒ',
                'è«‹è©•ä¼°å¯è¡Œæ€§ä¸¦èªªæ˜é¢¨éšªã€‚': 'å¯è¡Œæ€§åˆ†æ',
                'è«‹æä¾›è¡Œå‹•å»ºè­°ã€‚': 'è¡Œå‹•å»ºè­°'
            };
            return buttonMap[formatText] || '';
        }

        function updateButtonStates() {
            const buttons = document.querySelectorAll('.format-btn');
            buttons.forEach(btn => {
                const formatText = getFormatTextFromButton(btn.textContent);
                if (addedFormats.includes(formatText)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        function getFormatTextFromButton(buttonText) {
            const reverseButtonMap = {
                'è¡¨æ ¼æ ¼å¼': 'è«‹å°‡çµæœä»¥è¡¨æ ¼å½¢å¼è¼¸å‡ºã€‚',
                'æ¢åˆ—æ¸…å–®': 'è«‹å°‡çµæœä»¥æ¢åˆ—å¼å‘ˆç¾ã€‚',
                'JSONæ ¼å¼': 'è«‹å°‡çµæœä»¥ JSON æ ¼å¼è¼¸å‡ºã€‚',
                'æ®µè½èªªæ˜': 'è«‹ä»¥æ®µè½å½¢å¼è©³ç´°èªªæ˜ã€‚',
                '50å­—å…§': 'è«‹ä»¥ä¸è¶…é 50 å­—ç°¡æ½”å›ç­”ã€‚',
                '100å­—å…§': 'è«‹ä»¥ä¸è¶…é 100 å­—èªªæ˜ã€‚',
                'è©³ç´°åˆ†æ': 'è«‹æä¾›è©³ç´°å®Œæ•´çš„åˆ†æã€‚',
                'é‡é»æ‘˜è¦': 'è«‹æä¾›é‡é»æ‘˜è¦ã€‚',
                'åˆ†é»èªªæ˜': 'è«‹åˆ† 3-5 å€‹é‡é»èªªæ˜ã€‚',
                'æ­¥é©Ÿèªªæ˜': 'è«‹ä»¥æ­¥é©Ÿå¼æ–¹å¼èªªæ˜ã€‚',
                'å•ç­”å½¢å¼': 'è«‹ä»¥å•ç­”å½¢å¼å‘ˆç¾ã€‚',
                'æ¯”è¼ƒå°ç…§': 'è«‹é€²è¡Œå„ªç¼ºé»æ¯”è¼ƒã€‚',
                'å°ˆæ¥­è¡“èª': 'è«‹ä½¿ç”¨å°ˆæ¥­è¡“èªé€²è¡Œèªªæ˜ã€‚',
                'æ·ºé¡¯æ˜“æ‡‚': 'è«‹ç”¨æ·ºé¡¯æ˜“æ‡‚çš„æ–¹å¼èªªæ˜ã€‚',
                'å•†æ¥­å ±å‘Š': 'è«‹ä»¥å•†æ¥­å ±å‘Šçš„æ ¼å¼å‘ˆç¾ã€‚',
                'å­¸è¡“é¢¨æ ¼': 'è«‹ä»¥å­¸è¡“è«–æ–‡çš„é¢¨æ ¼æ’°å¯«ã€‚',
                'åŒ…å«ä¾‹å­': 'è«‹æä¾›å…·é«”ä¾‹å­èªªæ˜ã€‚',
                'æ•¸æ“šæ”¯æŒ': 'è«‹ç›¡é‡æä¾›ç›¸é—œæ•¸æ“šæ”¯æŒã€‚',
                'å¯è¡Œæ€§åˆ†æ': 'è«‹è©•ä¼°å¯è¡Œæ€§ä¸¦èªªæ˜é¢¨éšªã€‚',
                'è¡Œå‹•å»ºè­°': 'è«‹æä¾›è¡Œå‹•å»ºè­°ã€‚'
            };
            return reverseButtonMap[buttonText] || '';
        }

        function removeFormat(index) {
            addedFormats.splice(index, 1);
            renderTemplate();
        }

        function resetTemplate() {
            filledValues = {};
            renderTemplate();
        }

        function clearFormats() {
            addedFormats = [];
            renderTemplate();
        }

        function clearAll() {
            currentTemplate = '';
            templateInput.value = '';
            filledValues = {};
            placeholders = [];
            addedFormats = [];
            templateDisplay.innerHTML = '<div class="empty-template">è«‹é»æ“Šã€Œç·¨è¼¯æ¨¡æ¿ã€é–‹å§‹è¨­å®šä½ çš„ prompt æ¨¡æ¿...</div>';
        }

        function copyTemplateUrl() {
            const currentPrompt = templateInput.value.trim();
            if (!currentPrompt) {
                showNotification('âš ï¸ è«‹å…ˆè¼¸å…¥æ¨¡æ¿å…§å®¹', '#f56565');
                return;
            }

            try {
                // URL encode æ¨¡æ¿å…§å®¹
                const encodedPrompt = encodeURIComponent(currentPrompt);
                const baseUrl = window.location.origin + window.location.pathname;
                const shareUrl = `${baseUrl}?prompt=${encodedPrompt}`;
                
                // è¤‡è£½åˆ°å‰ªè²¼ç°¿
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(shareUrl).then(() => {
                        showNotification('ğŸ”— åˆ†äº«é€£çµå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼', '#0ea5e9');
                    }).catch((error) => {
                        console.error('Clipboard API failed:', error);
                        fallbackCopyToClipboard(shareUrl);
                    });
                } else {
                    fallbackCopyToClipboard(shareUrl);
                }
            } catch (error) {
                console.error('ç”¢ç”Ÿåˆ†äº«é€£çµå¤±æ•—:', error);
                showNotification('âŒ ç”¢ç”Ÿåˆ†äº«é€£çµå¤±æ•—', '#f56565');
            }
        }

        function fallbackCopyToClipboard(text) {
            try {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                const successful = document.execCommand('copy');
                document.body.removeChild(textArea);
                
                if (successful) {
                    showNotification('ğŸ”— åˆ†äº«é€£çµå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼', '#0ea5e9');
                } else {
                    showNotification('âŒ è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½', '#f56565');
                }
            } catch (error) {
                console.error('Fallback copy failed:', error);
                showNotification('âŒ è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½', '#f56565');
            }
        }

        // å…¨å±€è®Šé‡å­˜å„²é¸ä¸­çš„æ¨¡å‹
        let selectedModel = 'o4-mini';

        function generateResult() {
            let result = currentTemplate;
            
            placeholders.forEach((placeholder, index) => {
                const value = filledValues[index];
                if (value) {
                    result = result.replace(placeholder.full, value);
                }
            });

            // æ·»åŠ æ ¼å¼è¦æ±‚åˆ°çµæœä¸­
            if (addedFormats.length > 0) {
                result += '\n\n' + addedFormats.join(' ');
            }

            return result;
        }

        function toggleModelSelector() {
            const dropdown = document.getElementById('modelSelector');
            dropdown.classList.toggle('show');
        }

        function selectModel(model) {
            selectedModel = model;
            document.querySelector('.selected-model-display').textContent = model;
            
            // æ›´æ–°é¸ä¸­ç‹€æ…‹
            document.querySelectorAll('.model-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-model="${model}"]`).classList.add('selected');
            
            // éš±è—ä¸‹æ‹‰é¸å–®
            document.getElementById('modelSelector').classList.remove('show');
        }

        // åˆå§‹åŒ–æ¨¡å‹é¸æ“‡å™¨
        function initModelSelector() {
            // è¨­å®šé è¨­é¸ä¸­ç‹€æ…‹
            document.querySelector('[data-model="o4-mini"]').classList.add('selected');
            
            // ç‚ºæ¯å€‹é¸é …æ·»åŠ é»æ“Šäº‹ä»¶
            document.querySelectorAll('.model-option').forEach(option => {
                option.addEventListener('click', function() {
                    selectModel(this.dataset.model);
                });
            });
            
            // é»æ“Šå¤–éƒ¨é—œé–‰ä¸‹æ‹‰é¸å–®
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.chatgpt-button-group')) {
                    document.getElementById('modelSelector').classList.remove('show');
                }
            });
        }

        function openInChatGPT() {
            const result = generateResult();
            
            if (!result.trim()) {
                showNotification('âš ï¸ è«‹å…ˆè¨­å®šæ¨¡æ¿ä¸¦å¡«å…¥å…§å®¹', '#f56565');
                return;
            }
            
            // URL encode the result
            const encodedPrompt = encodeURIComponent(result);
            const chatGPTUrl = `https://chatgpt.com/?model=${selectedModel}&q=${encodedPrompt}`;
            
            // Open in new tab
            window.open(chatGPTUrl, '_blank');
            showNotification(`ğŸ’¬ å·²åœ¨æ–°åˆ†é é–‹å•Ÿ ChatGPT (${selectedModel})ï¼`);
        }

        function copyResult() {
            const result = generateResult();

            // è¤‡è£½åˆ°å‰ªè²¼ç°¿
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(result).then(() => {
                    showNotification('ğŸ“‹ å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
                }).catch((error) => {
                    console.error('Clipboard API failed:', error);
                    fallbackCopyToClipboard(result);
                });
            } else {
                fallbackCopyToClipboard(result);
            }
        }

        // éµç›¤å¿«æ·éµ
        document.addEventListener('keydown', (e) => {
            // ESC é—œé–‰ modal
            if (e.key === 'Escape') {
                if (fillModal.style.display === 'block') {
                    closeFillModal();
                }
                if (templateModal.style.display === 'block') {
                    closeTemplateEditor();
                }
            }
            
            // Enter ç¢ºèª
            if (e.key === 'Enter') {
                if (fillModal.style.display === 'block') {
                    confirmFill();
                } else if (templateModal.style.display === 'block' && e.ctrlKey) {
                    saveTemplate();
                }
            }
            
            // Ctrl+C è¤‡è£½çµæœ
            if (e.ctrlKey && e.key === 'c' && fillModal.style.display !== 'block' && templateModal.style.display !== 'block') {
                if (document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA') {
                    e.preventDefault();
                    copyResult();
                }
            }
            
            // Ctrl+Enter åœ¨ ChatGPT ä¸­é–‹å•Ÿ
            if (e.ctrlKey && e.key === 'Enter' && fillModal.style.display !== 'block' && templateModal.style.display !== 'block') {
                if (document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA') {
                    e.preventDefault();
                    openInChatGPT();
                }
            }
        });

        // é»æ“Š modal å¤–éƒ¨é—œé–‰
        fillModal.addEventListener('click', (e) => {
            if (e.target === fillModal) {
                closeFillModal();
            }
        });

        templateModal.addEventListener('click', (e) => {
            if (e.target === templateModal) {
                closeTemplateEditor();
            }
        });

        // é¡¯ç¤ºé€šçŸ¥
        function showNotification(message, color = '#48bb78') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = color;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–æ¨¡å‹é¸æ“‡å™¨
        document.addEventListener('DOMContentLoaded', function() {
            initModelSelector();
        });
    </script>
    
    <!-- Version Footer -->
    <div style="text-align: center; margin-top: 20px; padding: 10px; color: #888; font-size: 12px; border-top: 1px solid #eee;">
        ç‰ˆæœ¬ v0.3.2
    </div>
</body>
</html>